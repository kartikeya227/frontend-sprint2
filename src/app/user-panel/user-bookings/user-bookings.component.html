<app-user-panel></app-user-panel>
<section class="min-vh-100" id="cover">
  <div id="cover-caption">
    <div class="container">
      <h1 class="display-4 py-2 text-truncate text-center text-white"><b>BOOKINGS</b></h1>
      <div class="row">


        <div class=" my-5 col">
          <div class="card my-5">
            <div class="card-header text-center text-dark"><b>List Of All Bookings Made</b></div>
            <table class="table table-bordered table-striped">
              <thead class="thead-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Booking Id</th>
                <th scope="col">Booked by</th>
                <th scope="col">Passenger count</th>
              </tr>
              </thead>
              <tbody>
              <tr (click)="getDetails(i)" *ngFor="let booking of bookings; let i = index">
                <td>{{i + 1}}</td>
                <td>{{ booking.bookingId}}</td>
                <td>{{ booking.user.userName}}</td>
                <td>{{ booking.noOfPassengers }}</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div *ngIf="displayDetails" class="my-5 col">
          <div class="card my-5">
            <div class="card-header text-center text-dark"><b>Booking Details</b></div>
            <table class="table text-left table-bordered table-striped">
              <tbody>
              <tr>
                <td>Booking ID</td>
                <td>{{currentBooking.bookingId}}</td>
              </tr>
              <tr>
                <td>Booked by</td>
                <td>{{currentBooking.user.userName}}</td>
              </tr>
              <tr>
                <td>User Id</td>
                <td>{{currentBooking.user.userId}}</td>
              </tr>
              <tr>
                <td>contact number</td>
                <td>{{currentBooking.user.userPhone}}</td>
              </tr>
              <tr>
                <td>Email</td>
                <td>{{currentBooking.user.userEmail}}</td>
              </tr>
              <tr>
                <td>passenger count</td>
                <td>{{currentBooking.noOfPassengers}}</td>
              </tr>
              <tr>
                <td>Cost per ticket</td>
                <td>{{currentBooking.scheduledFlight.costPerTicket}}</td>
              </tr>
              <tr>
                <td>Total cost</td>
                <td>{{currentBooking.cost}}</td>
              </tr>
              <tr>
                <td>Flight Schedule Id</td>
                <td>{{currentBooking.scheduledFlight.scheduleFlightId}}</td>
              </tr>
              <tr>
                <td>Arrival Date</td>
                <td>{{currentBooking.scheduledFlight.schedule.arrivalDate}}</td>
              </tr>
              <tr>
                <td>arrivalTime</td>
                <td>{{currentBooking.scheduledFlight.schedule.arrivalTime}}</td>
              </tr>
              <tr>
                <td>departureDate</td>
                <td>{{currentBooking.scheduledFlight.schedule.departureDate}}</td>
              </tr>
              <tr>
                <td>departureTime</td>
                <td>{{currentBooking.scheduledFlight.schedule.departureTime}}</td>
              </tr>
              <tr>
                <td>Source airportName</td>
                <td>{{currentBooking.scheduledFlight.schedule.sourceAirport.airportName}}</td>
              </tr>
              <tr>
                <td>Destinaltion airportName</td>
                <td>{{currentBooking.scheduledFlight.schedule.destinationAirport.airportName}}</td>
              </tr>
              <tr>
                <td>Flight Number</td>
                <td>{{currentBooking.scheduledFlight.flight.flightNumber}}</td>
              </tr>
              <tr>
                <td>Carrier Name</td>
                <td>{{currentBooking.scheduledFlight.flight.carrierName}}</td>
              </tr>
              <tr>
                <td>Flight Model</td>
                <td>{{currentBooking.scheduledFlight.flight.flightModel}}</td>
              </tr>
              <tr>
                <td>Seat Capacity</td>
                <td>{{currentBooking.scheduledFlight.flight.seatCapacity}}</td>
              </tr>
              </tbody>
            </table>
            <div class="card-header alert-success font-weight-bolder text-center">Passenger List</div>
            <table class="table table-bordered table-striped">
              <thead class="thead-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">PNR</th>
                <th scope="col">Name</th>
                <th scope="col">Luggage</th>
                <th scope="col">Age</th>
                <th scope="col">Unique ID</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let passenger of currentBooking.passengerList; let i = index">
                <td>{{i + 1}}</td>
                <td>{{ passenger.pnrNumber}}</td>
                <td>{{ passenger.passengerName}}</td>
                <td>{{ passenger.luggage}}</td>
                <td>{{ passenger.passengerAge}}</td>
                <td>{{ passenger.passengerUin}}</td>
              </tr>
              </tbody>
            </table>
            <div>
              <button (click)="deleteBooking()" class="btn btn-danger mt-2 mb-2 mr-2" type="submit">Delete</button>
              <button (click)="updateDetails()" class="btn btn-primary mt-2 mb-2" type="submit">Update</button>
            </div>
          </div>
        </div>

        <div *ngIf="showUpdate" class="my-5 col">
          <div class="card my-5">
            <div class="card-header text-center text-dark"><b> Update Passenger List</b></div>
            <table class="table table-bordered table-striped">
              <thead class="thead-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">PNR</th>
                <th scope="col">Name</th>
                <th scope="col">Luggage</th>
                <th scope="col">Age</th>
                <th scope="col">Unique ID</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let passenger of currentBooking.passengerList; let i = index">
                <td>{{i + 1}}</td>
                <td>{{ passenger.pnrNumber}}</td>
                <td><input [(ngModel)]="passenger.passengerName"></td>
                <td><input [(ngModel)]="passenger.luggage"></td>
                <td><input [(ngModel)]="passenger.passengerAge"></td>
                <td><input [(ngModel)]="passenger.passengerUin"></td>
              </tr>
              </tbody>
            </table>

            <div>
              <button (click)="ConfirmUpdateDetails()" class="btn btn-primary" type="submit">Confirm & Update Booking
              </button>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>
</section>
